<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Joanna's 500 Albums Project - Reviews</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap" rel="stylesheet">


</head>
<body>

<nav class="navbar">
  <a href="index.html">NOW LISTENING</a>
  <a href="reviews.html"class="active">OFF THE RECORD</a>
  <a href="about.html">WHAT IS THIS</a>
</nav>

  <h1>REVIEWS</h1>
  <div id="table-container">
    <div id="desktop-table"></div>
    <div id="mobile-cards"></div>
  </div>


  <script>
  // Cache-busting to ensure fresh data
  fetch(`reviews.json?t=${Date.now()}`)
  .then(response => response.json())
  .then(reviews => {
    if (!reviews.length) {
      document.getElementById('desktop-table').textContent = "No reviews yet.";
      document.getElementById('mobile-cards').textContent = "No reviews yet.";
      return;
    }

    // Desktop table
    let tableHTML = `
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Album</th>
            <th>Artist</th>
            <th>Emoji</th>
            <th>Haiku</th>
          </tr>
        </thead>
        <tbody>
    `;

    reviews.forEach(entry => {
      tableHTML += `
        <tr>
          <td>${entry.row_number}</td>
          <td>${entry.Album}</td>
          <td>${entry.Artist}</td>
          <td class="emoji">${entry.emoji || ""}</td>
          <td class="haiku">${entry.haiku || ""}</td>
        </tr>
      `;
    });

    tableHTML += `</tbody></table>`;
    document.getElementById('desktop-table').innerHTML = tableHTML;

    // Mobile cards
    let cardsHTML = '';
    reviews.forEach(entry => {
      cardsHTML += `
        <div class="review-card">
          <div class="row-number">#${entry.row_number}</div>
          <div class="album">${entry.Album}</div>
          <div class="artist">${entry.Artist}</div>
          <div class="emoji">${entry.emoji || ""}</div>
          <div class="haiku">${entry.haiku || ""}</div>
        </div>
      `;
    });

    document.getElementById('mobile-cards').innerHTML = cardsHTML;
  })
  .catch(err => {
    document.getElementById('desktop-table').textContent = "Error loading reviews.";
    document.getElementById('mobile-cards').textContent = "Error loading reviews.";
    console.error(err);
  });

</script>


</body>
</html>
