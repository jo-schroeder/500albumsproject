<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Joanna's 500 Albums Project</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="favicon.png">
</head>
<body>
  <nav class="navbar">
  <a href="index.html">Current Album</a>
  <a href="reviews.html">Reviews</a>
  <a href="about.html">About</a>
</nav>

  <h1>Joanna's 500 Albums Project</h1>
  <div id="content" class="album-card">Loading...</div>
  <div id="progress-container"></div>

<script>
fetch(`album.json?t=${Date.now()}`)
  .then(response => response.json())
  .then(album => {

    // Extract the row number ‚Äî assuming your JSON has "row_number"
    const row = parseInt(album.row_number);
    const total = 500;
    const listeningNumber = total - row + 1;

    // Percent done
    const pct = Math.round((listeningNumber / total) * 100);

    // Progress bar HTML
    document.getElementById('progress-container').innerHTML = `
      <div class="progress-label">Album ${listeningNumber} of ${total}</div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: ${pct}%;"></div>
      </div>
    `;

    // ==== Format date (same as earlier) ====
    let dateDisplay = "Unknown";
    if (album.release_date) {
      const d = new Date(album.release_date);
      if (!isNaN(d)) {
        dateDisplay = d.getFullYear();
      }
    }

    // ==== Insert album card ====
    document.getElementById('content').innerHTML = `
      <div class="now-listening">üéß Now Listening</div>
      ${album.album_art ? `<img class="album-art" src="${album.album_art}" alt="Album Art">` : ""}
      <div class="album-name">‚Äú${album.Album}‚Äù</div>
      <div class="album-artist">${album.Artist}</div>
      <div class="album-meta"> ${dateDisplay}</div>
      <div class="album-meta"> ${album.genre || "Unknown Genre"}</div>
    `;

    // ==== Insert progress bar ====
    document.getElementById('progress-container').innerHTML = `
      <div class="progress-label">Album ${row} of ${total} (${pct}%)</div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: ${pct}%;"></div>
      </div>
    `;
  });

</script>


</body>
</html>
